{"version":3,"sources":["canvasparticles.js"],"names":[],"mappings":"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","file":"canvasparticles-compiled.js","sourcesContent":["/**\n * Created by Jsceoz on 2016/12/8.\n */\nvar CanvasParticle = (function(){\n  function getElementByTag(name){\n    return document.getElementsByTagName(name);\n  }\n  function getELementById(id){\n    return document.getElementById(id);\n  }\n  // 根据传入的config初始化画布\n  function canvasInit(canvasConfig){\n    canvasConfig = canvasConfig || {};\n    var html = getElementByTag(\"html\")[0];\n    var body = getElementByTag(\"body\")[0];\n    var canvasDiv = getELementById(\"canvas-particle\");\n    var canvasObj = document.createElement(\"canvas\");\n\n    var canvas = {\n      element: canvasObj,\n      points : [],\n      // 默认配置\n      config: {\n        vx: canvasConfig.vx || 4,\n        vy:  canvasConfig.vy || 4,\n        height: canvasConfig.height || 2,\n        width: canvasConfig.width || 2,\n        count: canvasConfig.count || 100,\n        color: canvasConfig.color || \"121, 162, 185\",\n        stroke: canvasConfig.stroke || \"130,255,255\",\n        dist: canvasConfig.dist || 6000,\n        e_dist: canvasConfig.e_dist || 20000,\n        max_conn: 10\n      }\n    };\n\n    // 获取context\n    if(canvas.element.getContext(\"2d\")){\n      canvas.context = canvas.element.getContext(\"2d\");\n    }else{\n      return null;\n    }\n\n    body.style.padding = \"0\";\n    body.style.margin = \"0\";\n    // body.replaceChild(canvas.element, canvasDiv);\n    body.appendChild(canvas.element);\n\n    canvas.element.style = \"position: absolute; top: 0; left: 0; z-index: -1;\";\n    canvasSize(canvas.element);\n    window.onresize = function(){\n      canvasSize(canvas.element);\n    }\n    body.onmousemove = function(e){\n      var event = e || window.event;\n      canvas.mouse = {\n        x: event.clientX,\n        y: event.clientY\n      }\n    }\n    document.onmouseleave = function(){\n      canvas.mouse = undefined;\n    }\n    setInterval(function(){\n      drawPoint(canvas);\n    }, 40);\n  }\n\n  // 设置canvas大小\n  function canvasSize(canvas){\n    canvas.width = window.innerWeight || document.documentElement.clientWidth || document.body.clientWidth;\n    canvas.height = window.innerWeight || document.documentElement.clientHeight || document.body.clientHeight;\n  }\n\n  // 画点\n  function drawPoint(canvas){\n    var context = canvas.context,\n      point,\n      dist;\n    context.clearRect(0, 0, canvas.element.width, canvas.element.height);\n    context.beginPath();\n    context.fillStyle = \"rgb(\"+ canvas.config.color +\")\";\n    for(var i = 0, len = canvas.config.count; i < len; i++){\n      if(canvas.points.length != canvas.config.count){\n        // 初始化所有点\n        point = {\n          x: Math.floor(Math.random() * canvas.element.width),\n          y: Math.floor(Math.random() * canvas.element.height),\n          vx: canvas.config.vx / 2 - Math.random() * canvas.config.vx,\n          vy: canvas.config.vy / 2 - Math.random() * canvas.config.vy\n        }\n      }else{\n        // 处理球的速度和位置，并且做边界处理\n        point =\tborderPoint(canvas.points[i], canvas);\n      }\n      context.fillRect(point.x - canvas.config.width / 2, point.y - canvas.config.height / 2, canvas.config.width, canvas.config.height);\n\n      canvas.points[i] = point;\n    }\n    drawLine(context, canvas, canvas.mouse);\n    context.closePath();\n  }\n\n  // 边界处理\n  function borderPoint(point, canvas){\n    var p = point;\n    if(point.x <= 0 || point.x >= canvas.element.width){\n      p.vx = -p.vx;\n      p.x += p.vx;\n    }else if(point.y <= 0 || point.y >= canvas.element.height){\n      p.vy = -p.vy;\n      p.y += p.vy;\n    }else{\n      p = {\n        x: p.x + p.vx,\n        y: p.y + p.vy,\n        vx: p.vx,\n        vy: p.vy\n      }\n    }\n    return p;\n  }\n\n  // 画线\n  function drawLine(context, canvas, mouse){\n    context = context || canvas.context;\n    for(var i = 0, len = canvas.config.count; i < len; i++){\n      // 初始化最大连接数\n      canvas.points[i].max_conn = 0;\n      // point to point\n      for(var j = 0; j < len; j++){\n        if(i != j){\n          dist = Math.round(canvas.points[i].x - canvas.points[j].x) * Math.round(canvas.points[i].x - canvas.points[j].x) +\n            Math.round(canvas.points[i].y - canvas.points[j].y) * Math.round(canvas.points[i].y - canvas.points[j].y);\n          // 两点距离小于吸附距离，而且小于最大连接数，则画线\n          if(dist <= canvas.config.dist && canvas.points[i].max_conn <canvas.config.max_conn){\n            canvas.points[i].max_conn++;\n            // 距离越远，线条越细，而且越透明\n            context.lineWidth = 0.5 - dist / canvas.config.dist;\n            context.strokeStyle = \"rgba(\"+ canvas.config.stroke + \",\"+ (1 - dist / canvas.config.dist) +\")\"\n            context.beginPath();\n            context.moveTo(canvas.points[i].x, canvas.points[i].y);\n            context.lineTo(canvas.points[j].x, canvas.points[j].y);\n            context.stroke();\n\n          }\n        }\n      }\n      // 如果鼠标进入画布\n      // point to mouse\n      if(mouse){\n        dist = Math.round(canvas.points[i].x - mouse.x) * Math.round(canvas.points[i].x - mouse.x) +\n          Math.round(canvas.points[i].y - mouse.y) * Math.round(canvas.points[i].y - mouse.y);\n        // 遇到鼠标吸附距离时加速，直接改变point的x，y值达到加速效果\n        if(dist > canvas.config.dist && dist <= canvas.config.e_dist){\n          canvas.points[i].x = canvas.points[i].x + (mouse.x - canvas.points[i].x) / 20;\n          canvas.points[i].y = canvas.points[i].y + (mouse.y - canvas.points[i].y) / 20;\n        }\n        if(dist <= canvas.config.e_dist){\n          context.lineWidth = 1;\n          context.strokeStyle = \"rgba(\"+ canvas.config.stroke + \",\"+ (1 - dist / canvas.config.e_dist) +\")\";\n          context.beginPath();\n          context.moveTo(canvas.points[i].x, canvas.points[i].y);\n          context.lineTo(mouse.x, mouse.y);\n          context.stroke();\n        }\n      }\n    }\n  }\n  return canvasInit;\n})();\n"]}